<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account</title>
    <link href="../style.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</head>

  <body>

    <div class="container-fluid position-fixed top-0">

      <!--Top Navbar-->
      <div class="row ng-bg-black ng-border-bottom">
        <div class="col px-5 py-3">
          <h5 class="ng-text-red fw-bold">01</h5>
          <a href="../index.html#main-content" class="h3 text-white fw-bold home-nav" id="home-nav">Home</a>
        </div>
        <div class="col px-5 py-3">
          <h5 class="ng-text-yellow fw-bold">02</h5>
          <a href="../index.html#about-content" class="h3 text-white fw-bold about-nav" id="about-nav">About</a>
        </div>
        <div class="col px-5 py-3">
          <h5 class="ng-text-green fw-bold">03</h5>
          <a href="../index.html#features-content" class="h3 text-white fw-bold features-nav" id="features-nav">Features</a>
        </div>
      </div>

    </div>

    <div class="container-fluid position-fixed bottom-0">

      <!-- Bottom Navbar -->
      <div class="row ng-bg-black ng-border-top">
        <div class="col px-5 py-3">
          <h5 class="ng-text-blue fw-bold">04</h5>
          <a href="../index.html#main-content" class="h3 text-white fw-bold pricing-nav" id="pricing-nav">Pricing</a>
        </div>
        <div class="col px-5 py-3">
          <h5 class="ng-text-purple fw-bold">05</h5>
          <a href="../index.html#resources-content" class="h3 text-white fw-bold resources-nav" id="resources-nav">Resources</a>
        </div>
        <div class="col px-5 py-3">
          <h5 class="ng-text-orange fw-bold">06</h5>
          <a href="../index.html#main-content" class="h3 text-white fw-bold career-nav" id="career-nav">Career</a>
        </div>
      </div>

    </div>

    <!--Main Content-->
    <div class="container-fluid vh-100 d-flex justify-content-center align-items-center ng-bg-black text-white" id="main-content">

      <!-- Landing -->
      <div class="row">
        <div class="col text-center text-md-start">
          <div class="ng-bg-dark shadow p-5">
            <h1 class="fw-bold ng-text-green">Create Account</h1>
            <div class="ng-text-red invisible" id="error_box">
              <p id="error_msg"></p>
            </div>
            <form class="needs-validation" action="./account-success.php" method="post" novalidate>
              <div class="text-start mb-3">
                <label for="username" class="form-label fw-bold">Username</label>
                <input class="form-control bg-transparent text-white rounded-0" type="text" name="username" id="username" required>
              </div>
              <div class="text-start mb-3">
                <label for="email" class="form-label fw-bold">Email</label>
                <input class="form-control bg-transparent text-white rounded-0" type="email" name="email" id="email" required>
              </div>
              <div class="text-start mb-3">
                <label for="password" class="form-label fw-bold">Password</label>
                <input class="form-control bg-transparent text-white rounded-0" type="password" name="password" id="password" required>
              </div>
              <div class="text-start mb-3">
                <label for="confirm-password" class="form-label fw-bold">Confirm Password</label>
                <input class="form-control bg-transparent text-white rounded-0" type="password" name="confirm-password" id="confirm-password" required>
              </div>
              <div class="d-flex align-items-center">
                <button class="ng-btn" type="submit">SIGN UP</button>
                <a href="./account-login.php" class="ng-text-blue text-decoration-none ms-3">Already have an account?</a>
              </div>
            </form>
          </div>
        </div>
      </div>

    </div>

    <script>
      const forms = document.querySelectorAll('.needs-validation')

      const username = document.getElementById('username')
      const email = document.getElementById('email')
      const password = document.getElementById('password')
      const confirm_password = document.getElementById('confirm-password')
      const error_box = document.getElementById('error_box')
      const error_msg = document.getElementById('error_msg')

      var error_log = []

      const removeValidation = function (input) {
        if (input.classList.contains('is-invalid')) {
          input.classList.remove('is-invalid')
        }
        if (input.classList.contains('is-valid')) {
          input.classList.remove('is-valid')
        }
      }

      const clearErrorLog = function () {
        error_log = []
        error_box.classList.add('invisible')
      }

      Array.prototype.slice.call(forms)
        .forEach(function (form) {
          form.addEventListener('submit', function (event) {
            clearErrorLog()
            if (!form.checkValidity()) {
              event.preventDefault()
              event.stopPropagation()
            }

            // Validate username
            if (username.value.match(/[^a-zA-Z0-9_]/g)) {
              removeValidation(username)
              username.classList.add('is-invalid')
              error_log.push('- No special characters allowed in username')
            } else {
              removeValidation(username)
              username.classList.add('is-valid')
            }

            if (username.value.length < 3) {
              removeValidation(username)
              username.classList.add('is-invalid')
              error_log.push('- Username must be at least 3 characters long')
            } else {
              removeValidation(username)
              username.classList.add('is-valid')
            }

            if (password.value !== confirm_password.value) {
              removeValidation(password)
              removeValidation(confirm_password)
              password.classList.add('is-invalid')
              confirm_password.classList.add('is-invalid')
              error_log.push('- Passwords do not match')

              console.log("haha no")
            } else {
              removeValidation(password)
              removeValidation(confirm_password)
              password.classList.add('is-valid')
              confirm_password.classList.add('is-valid')
              console.log("haha yes")
            }

            if (password.value.length < 8) {
              removeValidation(password)
              password.classList.add('is-invalid')
              confirm_password.classList.add('is-invalid')
              error_log.push('- Password must be at least 8 characters long')
            } else {
              removeValidation(password)
              password.classList.add('is-valid')
              confirm_password.classList.add('is-valid')
            }

            if (email.value.length < 1) {
              removeValidation(email)
              email.classList.add('is-invalid')
              error_log.push('- Email cannot be empty')
            } else {
              removeValidation(email)
              email.classList.add('is-valid')
            }

            if (error_log.length > 0) {
              event.preventDefault()
              event.stopPropagation()

              error_box.classList.remove('invisible')
              error_msg.innerHTML = error_log.join('<br>')
            }

          }, false)
        })
    </script>

  </body>

</html>
